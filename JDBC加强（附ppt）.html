<html>
<head>
  <title>JDBC加强（附ppt）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2902"/>
<h1>JDBC加强（附ppt）</h1>

<div>
<span><div><a href="JDBC加强（附ppt）_files/JDBC加强.ppt"><img src="JDBC加强（附ppt）_files/ea85188ef0d537793360c5fcf90a100d.png" alt="JDBC加强.ppt"></a></div><div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 35pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">XML</span></font></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    XML技术 (2天)</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        --》 写XML</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        --》 读XML</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">第二部分：JavaWeb开发</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    Servlet / JSP</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:6mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"> 相关接口：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        HttpServletRequest/response/ServletContext/HttpSession</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">……</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">.</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">第三部分：数据库</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    MySQL数据库</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">第四部分：JDBC</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    JDBC技术: java数据库连接技术！</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    接口：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        Connection:  连接对象</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        Statement:   执行命令对象: 把SQL语句发送到数据库执行</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        ResultSet:    (在线式)结果集接口, 必须要保持与数据库的连接！</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    开发步骤：</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">建项目，引入数据库驱动包</span></font></div></li><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">加载驱动  </span></font></div></li></ol><div align="justify" style="margin-left:21mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">Class.forName(..);</span></font></div><ol start="3" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">获取连接对象</span></font></div></li><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">创建执行sql语句的stmt对象;  写sql</span></font></div></li><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">执行sql</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: lower-alpha;" type="a"><li style="margin-left: 18pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">更新    delete/insert/update</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: lower-roman;" type="i"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">executeUpdate();      </span></font></div></li></ol></li><li style="margin-left: 18pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">查询    select</span></font></div><ol start="2" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: lower-roman;" type="i"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">executeQuery();</span></font></div></li></ol></li></ol></li></ol><ol start="6" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">关闭/异常</span></font></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">目标:</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">预编译sql处理(防止sql注入)</span></font></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">批处理</span></font></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">插入数据，获取自增长值</span></font></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">事务</span></font></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 14pt;"><font color="#FF0000" face="Calibri" size="2"><span style="font-size:10pt; font-family:Calibri; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">J</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">dbc中大文本类型的处理</span></font></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Normal; font-style:Normal; font-decoration:Normal">Jdbc综合练习</span></font></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">明天/后天：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">J</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">dbc技术优化、DbUtils组件、分页、连接池</span></font></div><ol style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>预编译sql处理(防止sql注入)</b></span></font></h1></div></li></ol><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 创建数据库</span></font><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE DATABASE jdbc_demo DEFAULT CHARACTER SET utf8;i</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 创建表</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">USE jdbc_demo;</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE TABLE admin(</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">    id INT PRIMARY KEY AUTO_INCREMENT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">    userName VARCHAR(20),</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">    pwd VARCHAR(20)</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">)</span></font></div></td></tr></table></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">|--</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">Statement</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">      执行SQL命令</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    |--</span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CallableStatement,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">     执行存储过程</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">|--</span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">PreparedStatement</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    预编译SQL语句执行</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">使用预编译SQL语句的命令对象，好处：</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">避免了频繁sql拼接 (可以使用占位符)</span></font></div></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">可以防止sql注入</span></font></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">登陆模块，</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    输入用户名，密码！</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">注意，</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">要避免用户输入的恶意密码！</span></font></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="Courier New" size="1"><span style="font-size:9pt"><br/></span></font><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">App {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//private String</span> <span style="font-size:9pt"><u>url</u></span> <span style="font-size:9pt">= &quot;jdbc:mysql://</span><span style="font-size:9pt"><u>localhost</u></span><span style="font-size:9pt">:3306/jdbc_demo&quot;;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">String</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">url</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;jdbc:mysql:///jdbc_demo&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">String</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">user</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;root&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">String</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">password</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;root&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Statement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">stmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ResultSet</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">没有使用防止</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>sql</u></span></font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">注入的案例</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testLogin() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.0</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">模拟登陆的用户名，密码</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String userName =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;tom&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//String</span> <span style="font-size:9pt"><u>pwd</u></span> <span style="font-size:9pt">= &quot;8881&quot;;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String pwd =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot; ' or 1=1 -- &quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// SQL</span></font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">语句</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;select * from admin where userName='&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">+userName+</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;'  and pwd='&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">+pwd+</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;' &quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        System.</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><i>out</i></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.println(sql);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.1</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">加载驱动，创建连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            Class.</span><span style="font-size:9pt"><i>forName</i></span><span style="font-size:9pt">(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;com.mysql.jdbc.Driver&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);     </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= DriverManager.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">url</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">user</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">password</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.2</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">创建</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span></font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">stmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.</span><span style="font-size:9pt; background:#c0c0c0">createStatement</span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.3</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">执行查询</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">stmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeQuery(sql);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">业务判断</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.next()) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                System.</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><i>out</i></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.println(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">登陆成功, 编号：&quot;</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">+</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getInt(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;id&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">));</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.4</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">关闭</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">stmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 2.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">使用PreparedStatement, 防止</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>sql</u></span></font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">注入</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>v</b></span></font><font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>oid</b></span></font> <font face="Courier New"><span style="font-size:13pt">testLogin2() {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// 1.0</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">模拟登陆的用户名，密码</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      String userName =</span></font> <font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot;tom&quot;</span></font><font face="Courier New"><span style="font-size:13pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">//String</span> <span style="font-size:13pt"><u>pwd</u></span> <span style="font-size:13pt">= &quot;8881&quot;;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      String pwd =</span></font> <font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot; ' or 1=1 -- &quot;</span></font><font face="Courier New"><span style="font-size:13pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// SQL</span></font><font color="#3F7F5F" face="宋体"><span style="font-size:13pt">语句</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      String sql =</span></font> <font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot;select * from admin where userName=?  and pwd=? &quot;</span></font><font face="Courier New"><span style="font-size:13pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      </span></font><font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>try</b></span></font> <font face="Courier New"><span style="font-size:13pt">{</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// 1.1</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">加载驱动，创建连接</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        Class.</span><span style="font-size:13pt"><i>forName</i></span><span style="font-size:13pt">(</span></font><font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot;com.mysql.jdbc.Driver&quot;</span></font><font face="Courier New"><span style="font-size:13pt">);   </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">con</span></font> <font face="Courier New"><span style="font-size:13pt">= DriverManager.</span><span style="font-size:13pt"><i>getConnection</i></span><span style="font-size:13pt">(</span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">url</span></font><font face="Courier New"><span style="font-size:13pt">,</span></font> <font color="#0000C0" face="Courier New"><span style="font-size:13pt">user</span></font><font face="Courier New"><span style="font-size:13pt">,</span></font> <font color="#0000C0" face="Courier New"><span style="font-size:13pt">password</span></font><font face="Courier New"><span style="font-size:13pt">);</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// 1.2</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">创建</span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt"><u>pstmt</u></span></font><font color="#3F7F5F" face="宋体"><span style="font-size:13pt">对象</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">pstmt</span></font> <font face="Courier New"><span style="font-size:13pt">=</span></font> <font color="#0000C0" face="Courier New"><span style="font-size:13pt">con</span></font><font face="Courier New"><span style="font-size:13pt">.prepareStatement(sql);  </span></font> <font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">//</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">对</span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt"><u>sql</u></span></font><font color="#3F7F5F" face="宋体"><span style="font-size:13pt">语句预编译</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">//</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">设置占位符值</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">pstmt</span></font><font face="Courier New"><span style="font-size:13pt">.setString(1, userName);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">pstmt</span></font><font face="Courier New"><span style="font-size:13pt">.setString(2, pwd);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// 1.3</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">执行</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">rs</span></font> <font face="Courier New"><span style="font-size:13pt">=</span></font> <font color="#0000C0" face="Courier New"><span style="font-size:13pt">pstmt</span></font><font face="Courier New"><span style="font-size:13pt">.executeQuery();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>if</b></span></font> <font face="Courier New"><span style="font-size:13pt">(</span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">rs</span></font><font face="Courier New"><span style="font-size:13pt">.next()) {</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">           System.</span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt"><i>out</i></span></font><font face="Courier New"><span style="font-size:13pt">.println(</span></font><font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot;</span></font><font color="#2A00FF" face="宋体"><span style="font-size:13pt">登陆成功，&quot;</span></font> <font face="Courier New"><span style="font-size:13pt">+</span></font> <font color="#0000C0" face="Courier New"><span style="font-size:13pt">rs</span></font><font face="Courier New"><span style="font-size:13pt">.getInt(</span></font><font color="#2A00FF" face="Courier New"><span style="font-size:13pt">&quot;id&quot;</span></font><font face="Courier New"><span style="font-size:13pt">));</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      }</span></font> <font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>catch</b></span></font> <font face="Courier New"><span style="font-size:13pt">(Exception e) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        e.printStackTrace();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      }</span></font> <font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>finally</b></span></font> <font face="Courier New"><span style="font-size:13pt">{</span></font></div><div align="left" style="min-height: 16pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#3F7F5F" face="Courier New"><span style="font-size:13pt">// 1.4</span></font> <font color="#3F7F5F" face="宋体"><span style="font-size:13pt">关闭</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        </span></font><font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>try</b></span></font> <font face="Courier New"><span style="font-size:13pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">           </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">rs</span></font><font face="Courier New"><span style="font-size:13pt">.close();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">           </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">pstmt</span></font><font face="Courier New"><span style="font-size:13pt">.close();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">           </span></font><font color="#0000C0" face="Courier New"><span style="font-size:13pt">con</span></font><font face="Courier New"><span style="font-size:13pt">.close();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        }</span></font> <font color="#7F0055" face="Courier New"><span style="font-size:13pt"><b>catch</b></span></font> <font face="Courier New"><span style="font-size:13pt">(Exception e) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">           e.printStackTrace();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">        }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">      }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">   }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">   </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">   </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New"><span style="font-size:13pt">}</span></font></div><div align="justify" style="min-height: 12pt;"> </div></td></tr></table></div><ol start="2" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>存储过程调用</b></span></font></h1></div></li></ol><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"><br/></span></font><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 存储过程</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 定义分隔符</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">DELIMITER $$</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE PROCEDURE proc_login()</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">BEGIN</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   SELECT * FROM admin;</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">END $$</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 调用</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CALL proc_login;</span></font></div></td></tr><tr><td align="left" style="border: solid #000000 1px;" valign="top" width="567"><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">App_call {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">全局参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Statement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><u>pstmt</u></span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">CallableStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><u>cstmt</u></span></font><font face="Courier New" size="1"><span style="font-size:9pt">; </span></font> <font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">存储过程</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ResultSet</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">程序中调用存储过程</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testCall()</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>throws</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Exception {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//1 .</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">创建连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//2. </span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">创建执行存储过程的</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span></font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            CallableStatement cstmt =</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareCall(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;CALL proc_login&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//3. </span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">执行（存储过程）</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= cstmt.executeQuery();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">遍历结果，测试</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.next()) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                String name =</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getString(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;userName&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                String</span> <span style="font-size:9pt; background:#ffff00">pwd</span> <span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getString(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;pwd&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">测试</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                System.</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><i>out</i></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.println(name +</span> <span style="font-size:9pt; background:#c0c0c0">pwd</span><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div><div align="justify" style="min-height: 12pt;"> </div></td></tr></table></div><ol start="3" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>批处理</b></span></font></h1></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">很多时候，需要批量执行sql语句！</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需求：批量保存信息！ </span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">设计：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    AdminDao</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">P</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">ublic  void  save(List&lt;Admin list){   </span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">// 目前用这种方式</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">            // 循环</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">            // 保存  (批量保存)</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        }</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">P</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">ublic  void  save(Admin  admin ){</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">            // 循环</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">            // 保存</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        }</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">技术：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    |-- Statement</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">批处理相关方法</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">void addBatch(String sql)  </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">   添加批处理</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">void clearBatch()  </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">          清空批处理</span></font></div><div align="justify" style="margin-left:7mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">int[] executeBatch() </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        执行批处理</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">实现：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    Admin.java         实体类封装数据</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    AdminDao.java      封装所有的与数据库的操作</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    App.java           测试</span></font></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Admin {</span></font><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">String</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">userName</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="justify" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">String</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pwd</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div></td></tr><tr><td align="left" style="border: solid #000000 1px;" valign="top" width="567"><font color="#010101" face="Courier New" size="1"><span style="font-size:9pt"><br/></span></font><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">App {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">测试批处理操作</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testBatch()</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>throws</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Exception {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">模拟数据</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        List&lt;Admin&gt; list =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ArrayList&lt;Admin&gt;();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>for</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>int</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">i=1; i&lt;21; i++) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            Admin admin =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Admin();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            admin.setUserName(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;Jack&quot;</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">+ i);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            admin.</span><span style="font-size:9pt; background:#c0c0c0">setPwd</span><span style="font-size:9pt">(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;888&quot;</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">+ i);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            list.add(admin);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">保存</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        AdminDao dao =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">AdminDao();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        dao.save(list);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="justify" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div></td></tr></table></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="Courier New" size="1"><span style="font-size:9pt"><br/></span></font><div align="left" style="min-height: 13pt;"><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">封装所有的与数据库的操作</span></font></div><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">AdminDao {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">全局参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ResultSet</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">批量保存管理员</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">save(List&lt;Admin&gt; list) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// SQL</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;INSERT INTO admin(userName,pwd) values(?,?)&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">获取连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">创建</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span> </font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql);          </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">【预编译SQL语句】</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>for</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>int</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">i=0; i&lt;list.size(); i++) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                Admin admin = list.get(i);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">设置参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setString(1, admin.getUserName());</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setString(2, admin.getPwd());</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">添加批处理</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.addBatch();                       </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">【不需要传入SQL】</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">测试：每5条执行一次批处理</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(i % 5 == 0) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">批量执行</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                    </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeBatch();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">清空批处理</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                    </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.</span><span style="font-size:9pt; background:#c0c0c0">clearBatch</span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">批量执行</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeBatch();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">清空批处理</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.</span><span style="font-size:9pt; background:#c0c0c0">clearBatch</span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="justify" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div></td></tr></table></div><ol start="4" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>插入数据，获取自增长值</b></span></font></h1></div></li></ol><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 31pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>需求</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：   </span></font></div></li></ul><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        李俊杰     18</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        张相       19</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">如何设计数据库？</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    编号    员工姓名    年龄    部门</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    01       李俊杰      18     开发部</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    02       张三        19     开发部</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">’</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">思考：</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    如何减少数据冗余？</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Wingdings" size="2"><span style="font-size:10pt">à</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">设置外键约束</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">所以，</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    编号    员工姓名    年龄    部门</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    01       李俊杰      18     1</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    02       张三        19     1</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    部门编号     部门名称   </span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    1             开发部           </span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">部门与员工，</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">    一对多的关系</span></font></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 31pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; font-weight: Bold; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>设计数据库：</b></span></font></div></li></ul><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    员工表 （外键表） 【员工表有一个外键字段，引用了部门表的主键】</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    部门表（主键表）</span></font></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 31pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10pt; font-weight: Bold; color: #ff0000;"><div align="justify" style="min-height: 13pt;"><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#ff0000; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>编码总体思路:</b></span></font></div></li></ul><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    保存员工及其对应的部门！</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    步骤：</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">先保存部门</span></font></div></li><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">再得到部门主键，再保存员工</span></font></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">开发具体步骤：</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 20pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">设计javabean</span></font></div></li><li style="margin-left: 20pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">设计dao</span></font></div></li><li style="margin-left: 20pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">测试</span></font></div></li></ol><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">部门</span></font><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE TABLE dept(</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   deptId INT PRIMARY KEY AUTO_INCREMENT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   deptName VARCHAR(20)</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">);</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 员工</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE TABLE employee(</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   empId INT PRIMARY KEY AUTO_INCREMENT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   empName VARCHAR(20),</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">   dept_id  INT   --  外键字段  </span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">);</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 给员工表添加外键约束</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">ALTER TABLE employee ADD CONSTRAINT FK_employee_dept_deptId</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">         FOREIGN KEY(dept_id) REFERENCES dept(deptId) ;</span></font></div><div align="justify" style="min-height: 12pt;"> </div></td></tr></table></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="Courier New" size="1"><span style="font-size:9pt"><br/></span></font><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">EmpDao {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ResultSet</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">保存员工，同时保存关联的部门</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">save(Employee emp){</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">保存部门</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_dept =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;insert into dept(deptName) values(?)&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">保存员工</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_emp =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;INSERT INTO employee (empName,dept_id) VALUES (?,?)&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">部门id</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>int</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">deptId = 0;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/*****</span></font><font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">保存部门，获取自增长*******/</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">【一、需要指定返回自增长标记】</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_dept,Statement.</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><i>RETURN_GENERATED_KEYS</i></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">设置参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setString(1, emp.getDept().getDeptName());</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">执行</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">【二、获取上面保存的部门子增长的主键】</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= </span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getGeneratedKeys();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">得到返回的自增长字段</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.next()) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                deptId =</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getInt(1);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/*****</span></font><font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">保存员工*********/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_emp);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">设置参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setString(1, emp.getEmpName());</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setInt(2, deptId);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div><div align="justify" style="min-height: 12pt;"> </div></td></tr></table></div><ol start="5" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>事务</b></span></font></h1></div></li></ol><h2 align="justify"></h2><p align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.57mm; margin-bottom:4.57mm;"><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>基本概念：</b></span></font></p><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">事务使指一组最小逻辑操作单元，里面有多个操作组成。 组成事务的每一部分必须要同时提交成功，如果有一个操作失败，整个操作就回滚。</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">事务ACID特性</span></font></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: disc;"><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>原子性（Atomicity）<br/></b></span><span style="font-size:10pt">原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt"> </span></font></div></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>一致性（Consistency）<br/></b></span><span style="font-size:10pt">事务必须使数据库从一个一致性状态变换到另外一个一致性状态。</span></font></div></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>隔离性（Isolation）<br/></b></span><span style="font-size:10pt">事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</span></font></div></li><li style="margin-left: 33pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>持久性（Durability）<br/></b></span><span style="font-size:10pt">持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响</span></font></div></li></ul><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">事务的特性：</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">原子性，是一个最小逻辑操作单元 !</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">一致性，事务过程中，数据处于一致状态。</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">持久性， 事务一旦提交成功，对数据的更改会反映到数据库中。</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">隔离性， 事务与事务之间是隔离的。</span></font></div><h2 align="justify"><font color="#010101" face="宋体" size="4"><span style="font-size:16pt"><b>案例</b></span></font></h2><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>需求</b></span><span style="font-size:10pt">： 张三给李四转账</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>设计</b></span><span style="font-size:10pt">： 账户表</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>技术</b></span><span style="font-size:10pt">：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">|-- Connection</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">void setAutoCommit(boolean autoCommit)</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">;  设置事务是否自动提交</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">                                      如果设置为false，表示手动提交事务。</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">void commit() ()</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">;                        手动提交事务</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">void rollback()</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">;                         回滚（出现异常时候，所有已经执行成功的代码需要回退到事务开始前的状态。）</span></font></div><div align="justify" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">Savepoint setSavepoint(String name)</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>代码：</b></span></font></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 账户表</span></font><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE TABLE account(</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   id INT PRIMARY KEY AUTO_INCREMENT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   accountName VARCHAR(20),</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">   money DOUBLE</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">);</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 转账</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">UPDATE account SET money=money-1000 WHERE accountName='张三';</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">UPDATE account SET money=money+1000 WHERE accountName='李四';</span></font></div></td></tr></table></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="Courier New" size="1"><span style="font-size:9pt"><br/></span></font><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">AccountDao {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">全局参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">转账，没有使用事务</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">trans1() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_zs =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money-1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">张三';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_ls =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money+1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">李四';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font> <font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">默认开启的隐士事务</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setAutoCommit(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>true</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第一次执行SQL ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_zs);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第二次执行SQL ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_ls);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 2.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">转账，使用事务</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">trans2() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_zs =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money-1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">张三';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_ls =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE1 account SET money=money+1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">李四';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font> <font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">默认开启的隐士事务</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">一、设置事务为手动提交</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setAutoCommit(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>false</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第一次执行SQL ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_zs);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第二次执行SQL ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_ls);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">二、 出现异常，需要回滚事务</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.rollback();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(SQLException e1) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">三、所有的操作执行成功, 提交事务</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.commit();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(SQLException e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 3.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">转账，使用事务， 回滚到指定的代码段</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">trans() {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">定义个标记</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span><span style="font-size:9pt; background:#c0c0c0">Savepoint</span> <span style="font-size:9pt">sp =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">第一次转账</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_zs1 =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money-1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">张三';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_ls1 =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money+1000 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">李四';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">第二次转账</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_zs2 =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE account SET money=money-500 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">张三';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql_ls2 =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;UPDATE1 account SET money=money+500 WHERE accountName='</span></font><font color="#2A00FF" face="宋体" size="1"><span style="font-size:9pt">李四';&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font> <font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">默认开启的隐士事务</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setAutoCommit(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>false</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);      </span></font> <font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">设置事务手动提交</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第一次转账 ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_zs1);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_ls1);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">回滚到这个位置？</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            sp =</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setSavepoint();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F5FBF" face="Courier New" size="1"><span style="font-size:9pt">/***</span></font> <font color="#3F5FBF" face="宋体" size="1"><span style="font-size:9pt">第二次转账 ***/</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_zs2);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql_ls2);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">回滚 (回滚到指定的代码段)</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.rollback(sp);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(SQLException e1) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">提交</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.commit();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(SQLException e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div><div align="justify" style="min-height: 12pt;"> </div></td></tr></table></div><ol start="6" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="Calibri" size="5"><span style="font-size:22pt; font-family:Calibri; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>J</b></span></font><font color="#010101" face="宋体" size="5"><span style="font-size:22pt"><b>dbc中大文本类型的处理</b></span></font></h1></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">Oracle中大文本数据类型，</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">C</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">lob    长文本类型   （MySQL中不支持，使用的是text）</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">B</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">lob    二进制类型</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">MySQL数据库，</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">T</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">ext    长文本类型</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">B</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">lob    二进制类型</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需求： jdbc中操作长文本数据。</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">设计： 测试表</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">编码：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    保存大文本数据类型</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    读取大文本数据类型</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    保存二进制数据</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    读取二进制数据</span></font></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">-- 测试大数据类型</span></font><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">CREATE TABLE test(</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">     id INT PRIMARY KEY AUTO_INCREMENT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">     content LONGTEXT,</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">     img LONGBLOB</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">);</span></font></div></td></tr><tr><td align="left" style="border: solid #000000 1px;" valign="top" width="567"><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">T</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">ext:</span></font></div></td></tr><tr><td align="left" style="border: solid #000000 1px;" valign="top" width="567"><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">App_text {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">全局参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Statement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">ResultSet</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">保存大文本数据类型   ( 写</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>longtext</u></span><span style="font-size:9pt">)</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testSaveText() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;insert into test(content) values(?)&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span> <span style="font-size:9pt"><u>pstmt</u></span> </font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">设置参数</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">先获取文件路径</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            String path = App_text.</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getResource(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;tips.txt&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">).getPath();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            FileReader reader =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">FileReader(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">File(path));</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setCharacterStream(1, reader);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">执行</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>sql</u></span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeUpdate();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">关闭</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            reader.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 2.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">读取大文本数据类型   ( 读</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>longtext</u></span><span style="font-size:9pt">)</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testGetAsText() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;select * from  test;&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span> <span style="font-size:9pt"><u>pstmt</u></span> </font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">读取</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeQuery();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.next()) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">获取长文本数据, 方式1:</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//Reader r = rs.getCharacterStream(&quot;content&quot;);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">获取长文本数据, 方式2:</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                System.</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><i>out</i></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.print(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getString(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;content&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">));</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div><div align="justify" style="min-height: 10pt;"> </div></td></tr></table></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:569px;" width="568"><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="567"><div align="justify" style="min-height: 12pt;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">blob</span></font></div></td></tr><tr><td align="left" style="border: solid #000000 1px;" valign="top" width="567"><div align="left" style="min-height: 9pt;"><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">App_blob {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">全局参数</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Connection</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">Statement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt"><u>stmt</u></span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">PreparedStatement</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>private</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt; background:#c0c0c0">ResultSet</span> </font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 1.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">二进制数据类型   ( 写</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>longblob</u></span><span style="font-size:9pt">)</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testSaveText() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;insert into test(img) values(?)&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span> <span style="font-size:9pt"><u>pstmt</u></span> </font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">获取图片流</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            InputStream in = App_text.</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>class</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getResourceAsStream(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;7.jpg&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.setBinaryStream(1, in);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">执行保存图片</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.execute();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">关闭</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            in.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#646464" face="Courier New" size="1"><span style="font-size:9pt">@Test</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">// 2.</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">读取大文本数据类型   ( 读</span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt"><u>longblob</u></span><span style="font-size:9pt">)</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>void</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">testGetAsText() {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        String sql =</span></font> <font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;select img from  test where id=2;&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>try</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">连接</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">= JdbcUtil.</span><span style="font-size:9pt"><i>getConnection</i></span><span style="font-size:9pt">();</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span> <span style="font-size:9pt"><u>pstmt</u></span> </font><font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">对象</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.prepareStatement(sql);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">读取</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font> <font face="Courier New" size="1"><span style="font-size:9pt">=</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.executeQuery();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>if</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.next()) {</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">获取图片流</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                InputStream in =</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">rs</span></font><font face="Courier New" size="1"><span style="font-size:9pt">.getBinaryStream(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;img&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">图片输出流</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                FileOutputStream out =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">FileOutputStream(</span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">File(</span></font><font color="#2A00FF" face="Courier New" size="1"><span style="font-size:9pt">&quot;c://1.jpg&quot;</span></font><font face="Courier New" size="1"><span style="font-size:9pt">));</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>int</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">len = -1;</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>byte</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">b[] =</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>new</b></span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>byte</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">[1024];</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>while</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">((len = in.read(b)) != -1) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                    out.write(b, 0, len);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left" style="min-height: 13pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                </span></font><font color="#3F7F5F" face="Courier New" size="1"><span style="font-size:9pt">//</span></font> <font color="#3F7F5F" face="宋体" size="1"><span style="font-size:9pt">关闭</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                out.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">                in.close();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            </span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>catch</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">(Exception e) {</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            e.printStackTrace();</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>finally</b></span></font> <font face="Courier New" size="1"><span style="font-size:9pt">{</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">            JdbcUtil.</span><span style="font-size:9pt"><i>closeAll</i></span><span style="font-size:9pt">(</span></font><font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">con</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#0000C0" face="Courier New" size="1"><span style="font-size:9pt">pstmt</span></font><font face="Courier New" size="1"><span style="font-size:9pt">,</span></font> <font color="#7F0055" face="Courier New" size="1"><span style="font-size:9pt"><b>null</b></span></font><font face="Courier New" size="1"><span style="font-size:9pt">);</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left" style="min-height: 9pt;"><font face="Courier New" size="1"><span style="font-size:9pt">}</span></font></div><div align="justify" style="min-height: 10pt;"> </div></td></tr></table></div><ol start="7" style="margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 22pt; font-weight: Bold; color: #010101;"><div style="margin-top: 0pt; margin-bottom: 17pt;"><h1 align="justify"><font color="#010101" face="宋体" size="5"><span style="font-size:22pt; font-family:����; color:#010101; font-weight:Bold; font-style:Normal; font-decoration:Normal"><b>综合案例</b></span></font></h1></div></li></ol><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">需求分析：</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    登陆、注册、注销；</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    登陆成功，</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">        显示所有的员工</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">设计</span></font></div><div align="justify" style="margin-left:7mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">数据库设计：</span></font></div><div align="justify" style="margin-left:7mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">A</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">dmin,  存放所有的登陆用户</span></font></div><div align="justify" style="margin-left:7mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 14pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">    </span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">E</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">mployee, 存放所有的员工信息</span></font></div><div align="justify" style="margin-left:7mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">系统设计</span></font></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: lower-alpha;" type="a"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">系统结构</span></font></div></li></ol><div align="justify" style="margin-left:21mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">分层： 基于mvc模式的分层</span></font></div><ol start="2" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;list-style-type: lower-alpha;" type="a"><li style="margin-left: 57pt; margin-right: 0pt; padding-left: 0pt; text-indent:0pt; font-family: Calibri; font-size: 10pt; color: #010101;"><div align="justify" style="min-height: 13pt;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt; font-family:����; color:#010101; font-weight:Normal; font-style:Normal; font-decoration:Normal">项目用到的公用组件、类 (了解)</span></font></div></li></ol><div align="justify" style="min-height: 153pt;"><img src="JDBC加强（附ppt）_files/Image.png" type="image/png" alt="graphic" border="0" height="205" width="553"/></div><div align="justify" style="min-height: 13pt;"><div><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">编码</span></font></div></div></div></span>
</div></body></html> 