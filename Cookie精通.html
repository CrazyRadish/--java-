<html>
<head>
  <title>Cookie精通</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2263"/>
<h1>Cookie精通</h1>

<div>
<span><div><a href="Cookie精通_files/04.会话管理.ppt"><img src="Cookie精通_files/7642235ea184ee2f7322f8d559b62f84.png" alt="04.会话管理.ppt"></a><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="宋体"><span style="font-size:12pt"><b> 特点</b></span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     </span></font><font color="#FF0000" face="Times New Roman" size="2"><span style="font-size:10pt">Cookie</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">技术：会话数据保存在浏览器客户端。</span></font></div><div><span style="font-size: 20px;"><b><font color="#010101" face="宋体"><span style="font-size:12pt"><b>  Cookie技术核心</b></span></font></b></span></div></div><div align="justify" style="font-weight: bold; font-size: 20px;"><span style="font-size: 12pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     Cookie</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">类：用于存储会话数据</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）构造Cookie对象</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   Cookie(java.lang.String name, java.lang.String value)</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）设置cookie</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   void setPath(java.lang.String uri)  </span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：设置cookie的有效访问路径</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   void setMaxAge(int expiry)</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">： 设置cookie的有效时间</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   void setValue(java.lang.String newValue)</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：设置cookie的值</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            3</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）发送cookie到浏览器端保存</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   void response.addCookie(Cookie cookie)  :</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">发送cookie</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            4</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）服务器接收cookie</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   Cookie[] request.getCookies()  :</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">接收cookie</span></font></div><div><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><a href="Cookie精通_files/CookieDemo1.java"><img src="Cookie精通_files/8a40041ddeb626f905fb349c80b2838a.png" alt="CookieDemo1.java"></a><a href="Cookie精通_files/DeleteCookie.java"><img src="Cookie精通_files/225032e17b811ee23bb614ad9e48def7.png" alt="DeleteCookie.java"></a><br/></span></span></div><div><h2 align="justify"><font color="#010101" face="宋体"><span style="font-size:12pt"><b>  Cookie原理</b></span></font></h2><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）服务器创建cookie对象，把会话数据存储到cookie对象中。</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          new Cookie(&quot;name&quot;,&quot;value&quot;);</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">  </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">服务器发送cookie信息到浏览器</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          response.addCookie(cookie);</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   </span></font><font color="#FF0000" face="Times New Roman" size="2"><span style="font-size:10pt">       </span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">举例： set-cookie: name=eric  (隐藏发送了一个set-cookie名称的响应头)</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            3</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）浏览器得到服务器发送的cookie，然后保存在浏览器端。</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            4</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）浏览器在下次访问服务器时，会带着cookie信息</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                      </span></font> <font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">举例： cookie: name=eric  (隐藏带着一个叫cookie名称的请求头)</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            5</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）服务器接收到浏览器带来的cookie信息</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          request.getCookies();</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">              </span></font></div></div><div><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="宋体"><span style="font-size:12pt"><b>  Cookie的细节</b></span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">void setPath(java.lang.String uri)  </span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">：设置cookie的有效访问路径。有效路径指的是cookie的有效路径保存在哪里，那么浏览器在有效路径下访问服务器时就会带着cookie信息，否则不带cookie信息。</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     </span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">void setMaxAge(int expiry)</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">： 设置cookie的有效时间。</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">正整数：表示cookie数据保存浏览器的缓存目录（硬盘中），数值表示保存的时间。</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">负整数：表示cookie数据保存浏览器的内存中。浏览器关闭cookie就丢失了！！</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">零：表示删除同名的cookie数据</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     3</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）Cookie数据类型</span></font><font color="#FF0000" face="宋体" size="2"><span style="font-size:10pt">只能保存非中文字符串类型的。</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">可以保存多个cookie，但是浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小限制为4KB。</span></font></div></div></div></span>
</div></body></html> 