<html>
<head>
  <title>Xml-DOM解析</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2268"/>
<h1>Xml-DOM解析</h1>

<div>
<span><div><a href="Xml-DOM解析_files/02.Xml解析.ppt"><img src="Xml-DOM解析_files/013942a68a7993ba844a603f072109a4.png" alt="02.Xml解析.ppt"></a><br/></div><div align="justify" style="font-weight: bold; font-size: 20px;"><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>2. 什么是DOM解析</b></span></font></div><div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     DOM</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">解析原理：xml解析器一次性把整个xml文档加载进内存，然后在内存中构建一颗Document的对象树，通过Document对象，得到树上的节点对象，通过节点对象访问（操作）到xml文档的内容。</span></font></div><div><span style="font-size: 32px;"><i><font color="#010101" face="宋体">解析图.</font></i></span><img src="Xml-DOM解析_files/DOM解析原理示意.png" type="image/png" style="height: auto;"/></div></div><h2 align="justify"><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>     4.5 Dom4j工具</b></span></font></h2><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">非官方，不在jdk中。</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                     </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">使用步骤：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            1</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）导入dom4j的核心包。</span></font> <font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">dom4j-1.6.1.jar</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            2</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">）编写Dom4j读取xml文件代码</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            </span></font></div><div style="margin-left: -2mm;"><table cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 1px; border-color: #000000;width:584px;" width="583"><colgroup><col width="583"></col></colgroup><tbody><tr><td align="left" style="border: solid #000000 1px;width:100%;" valign="top" width="582"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">main(String[] args) {</span></font><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>try</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></div><div align="left" style="min-height: 14pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font><font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt">//1.</span></font><font color="#3F7F5F" face="宋体" size="2"><span style="font-size:10pt">创建一个</span></font><font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt"><u>xml</u></span></font><font color="#3F7F5F" face="宋体" size="2"><span style="font-size:10pt">解析器对象</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font><font color="#FF0000" face="Courier New" size="2"><span style="font-size:10pt">SAXReader reader =</span> <span style="font-size:10pt"><b>new</b></span> <span style="font-size:10pt">SAXReader();</span></font></div><div align="left" style="min-height: 14pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font><font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt">//2.</span></font><font color="#3F7F5F" face="宋体" size="2"><span style="font-size:10pt">读取</span></font><font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt"><u>xml</u></span></font><font color="#3F7F5F" face="宋体" size="2"><span style="font-size:10pt">文档，返回Document对象</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font><font color="#FF0000" face="Courier New" size="2"><span style="font-size:10pt">Document doc = reader.read(</span><span style="font-size:10pt"><b>new</b></span> <span style="font-size:10pt">File(&quot;./src/contact.xml&quot;));</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           System.</span></font><font color="#0000C0" face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(doc);</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">       }</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>catch</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(DocumentException e) {</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           e.</span><span style="font-size:10pt; background:#c0c0c0">printStackTrace</span><span style="font-size:10pt">();</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">           </span></font><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>throw</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">RuntimeException(e);</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">       }</span></font></div><div align="left" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font></div><div align="justify" style="min-height: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt">    }</span></font></div></td></tr></tbody></table></div><h2 align="justify"><font color="#010101" face="宋体" size="4"><span style="font-size:14pt"><b>     4.6 Domj4读取xml文件</b></span></font></h2><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">节点：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   Iterator  Element.nodeIterator();  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取当前标签节点下的所有子节点</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">标签：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                     Element  Document.getRootElement();  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取xml文档的根标签</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">           </span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                    Element   ELement.element(&quot;</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">标签名&quot;) //指定名称的第一个子标签</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                     Iterator&lt;Element&gt; Element.elementIterator(&quot;</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">标签名&quot;);// 指定名称的所有子标签</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          List&lt;Element&gt;  Element.elements(); //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取所有子标签</span></font></div><div align="justify" style="min-height: 12pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          </span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">属性：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                   String   Element.attributeValue(&quot;</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">属性名&quot;) //获取指定名称的属性值</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                    Attribute    Element.attribute(&quot;</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">属性名&quot;)；//获取指定名称的属性对象</span></font><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">  </span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                                 Attribute.getName()  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取属性名称</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                                 Attibute.getValue()  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取属性值</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          List&lt;Attribute&gt;        Element.attributes();  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取所有属性对象</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                          Iterator&lt;Attribute&gt;        Element.attibuteIterator(); //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取所有属性对象</span></font></div><div align="justify" style="min-height: 13pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                            </span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">文本：</span></font></div><div align="justify" style="min-height: 14pt;"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                                 Element.getText();  //</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">获取当前标签的文本</span></font></div><div align="justify" style="min-height: 14pt;"><div><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt">                                                 Element.elementText(&quot;</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">标签名&quot;) //获取当前标签的指定名称的子标签的文本内容</span></font></div></div></div></span>
</div></body></html> 